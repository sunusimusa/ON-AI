<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tele Tech AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#eef2f7;
  margin:0;
}
.container{
  max-width:650px;
  margin:20px auto;
  background:#fff;
  border-radius:10px;
  box-shadow:0 0 12px rgba(0,0,0,.1);
  padding:15px;
}
h2{text-align:center;margin:10px 0;}
.section{margin-bottom:20px;}
textarea,input{
  width:100%;
  padding:10px;
  border-radius:6px;
  border:1px solid #ccc;
  box-sizing:border-box;
}
button{
  width:100%;
  padding:10px;
  background:#007bff;
  color:#fff;
  border:none;
  border-radius:6px;
  margin-top:8px;
}
#chat{
  max-height:260px;
  overflow-y:auto;
  border:1px solid #ddd;
  padding:10px;
  border-radius:6px;
  background:#fafafa;
}
.msg{margin-bottom:8px;}
.user{color:#007bff;font-weight:bold;}
.ai{color:#333;}
img{
  max-width:100%;
  margin-top:10px;
  border-radius:8px;
  display:none;
}
.small{
  font-size:13px;
  color:#666;
  text-align:center;
}
</style>
</head>

<body>
<div class="container">

<h2>Tele Tech AI</h2>

<!-- ===== TEXT CHAT ===== -->
<div class="section">
  <h3>ðŸ’¬ Chat</h3>
  <div id="chat"></div>
  <textarea id="chatInput" placeholder="Ask me anything..."></textarea>
  <button onclick="sendChat()">Send</button>
</div>

<!-- ===== IMAGE GENERATOR ===== -->
<div class="section">
  <h3>ðŸ–¼ Image Generator</h3>
  <input id="imgPrompt" placeholder="Describe the image you want">
  <button onclick="generateImage()">Generate Image</button>
  <img id="imgResult">
</div>

<p class="small">Free plan limited â€¢ Pro coming soon ðŸš€</p>

</div>

<script>
/* ===== CHAT ===== */
async function sendChat(){
  const input=document.getElementById("chatInput");
  const chat=document.getElementById("chat");
  const msg=input.value.trim();
  if(!msg)return;

  chat.innerHTML+=`<div class="msg"><span class="user">You:</span> ${msg}</div>`;
  input.value="";
  chat.scrollTop=chat.scrollHeight;

  chat.innerHTML+=`<div class="msg ai" id="thinking">AI: Thinking...</div>`;
  chat.scrollTop=chat.scrollHeight;

  try{
    const res=await fetch("/chat",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({message:msg})
    });
    const data=await res.json();
    document.getElementById("thinking").innerHTML=
      `<span class="ai">AI:</span> ${data.success?data.reply:"Error"}`;
  }catch{
    document.getElementById("thinking").innerText="AI: Server error";
  }
}

/* ===== IMAGE ===== */
async function generateImage(){
  const prompt=document.getElementById("imgPrompt").value.trim();
  const img=document.getElementById("imgResult");
  if(!prompt)return alert("Enter image description");

  img.style.display="none";

  try{
    const res=await fetch("/generate",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({prompt})
    });
    const data=await res.json();
    if(data.success){
      img.src=data.image;
      img.style.display="block";
    }else{
      alert(data.message||"Failed");
    }
  }catch{
    alert("Server error");
  }
}
</script>

</body>
</html>
